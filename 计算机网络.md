# 计算机网络

## 原理

计算机网络是多层级结构，一般通用的TCP/IP五层结构：自顶向下依次是

应用层-传输层-网络层-链路层-物理层，下层通过接口利用功能为上层提供服务，上层调用下层的接口来实现功能。

计算机网络的作用是什么？计算机网络主要提供通信网络，既然是通信网络，保证通讯就有两个很重要的特性，可靠性和及时性。

## 什么是socketAPI

socket是管理会话的工具，一个四元组的套接字，一个socket对应一个进程间通信的会话关系。

为什么要有socket呢？首先不同进程间通信时，需要自顶层向下层封装通过网络传播，其中就有个问题，如果每一次通信都要将报文封装再传输是十分低效率的，我们通过一个socket四元组（TCP协议下，UDP是二元组）：源主机、源端口号、目的主机、目的端口号标识一个连接，报文直接通过这个连接传输；此外通过socket能告诉操作系统当前正在和哪个进程通信，发送和接受数据通过查询socket表就知道消息接收方和来远方。socket是主机内部的标识通信的工具。

## 传输层提供的Internet服务

|       TCP        |        UDP         |
| :--------------: | :----------------: |
| 面向连接、可靠的 | 不可靠，不面向连接 |
|     流量控制     |                    |
|     拥塞控制     |                    |

## 应用层

### HTTP协议

http协议是无状态的协议。什么是无状态的协议？即不维护与客户端的状态，传输报文后是无记忆的。

| HTTP1.0                                                | HTTP1.1                    |
| ------------------------------------------------------ | -------------------------- |
| 非持久的传输协议                                       | 持久的传输协议             |
| 非流水线传输方式，传输一个报文需要2RTT（通信来回时间） | 流水线传输方式，类似于队列 |

http1.0非流水线传输，因为协议是非持久的，在传输报文后连接关闭，所以对于每个报文的传输过程可以归纳为，建立连接（一个RTT），传输（一个RTT），往后传输依次进行。

http1.1流水线传输，连接持久建立，传输报文存放在pipeline中，在连接建立后，报文都可以从管道依次传输出来。

